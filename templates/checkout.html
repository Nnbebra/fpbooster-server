{% extends "account_base.html" %}
{% block title %}Оформление заказа — {{ plan.title }}{% endblock %}

{% block content %}
<style>
  /* Подгонка под примерный CSS из твоего файла */
  .modal-wrapper { display:flex; justify-content:center; padding:60px 0; }
  .modal-content-custom {
    width: 100%; max-width: 980px; border-radius: 12px; overflow: hidden;
    background: linear-gradient(330deg,#141417,#1a1a1d);
    border: 1px solid rgba(255,255,255,0.04);
    box-shadow: 0 30px 80px rgba(0,0,0,0.7);
    color: #e8e8e8;
    display: grid; grid-template-columns: 320px 1fr; gap: 0;
  }

  .pm-methods {
    padding: 20px; background: linear-gradient(180deg, rgba(255,255,255,0.02), transparent);
    display:flex; flex-direction:column; gap:12px; align-items:center;
  }
  .pm-method {
    width: 100%; display:flex; align-items:center; justify-content:center;
    padding:10px; border-radius:10px; background: rgba(255,255,255,0.02);
    cursor:pointer; transition: transform .12s ease, box-shadow .12s ease;
  }
  .pm-method img { max-width: 100%; height: 44px; object-fit:contain; }
  .pm-method.active { box-shadow: 0 8px 30px rgba(159,86,203,0.12); transform: translateY(-4px); }

  .pm-info { padding: 28px 30px; display:flex; flex-direction:column; gap:12px; }
  .pm-info h4 { margin:0; color:#fff; font-size:1.25rem; }
  .pm-info .price-line { color:#d6d6d6; font-size:1.05rem; }
  .pm-info .price-line s { color:#ff6b6b; margin-right:8px; }
  .badge-discount { display:inline-block; background:#dc3545; color:#fff; padding:6px 10px; border-radius:8px; font-weight:700; }

  .btn-continue {
    margin-top:12px;
    background: linear-gradient(330deg,#9f56cb,#f988e7);
    border:none; color:#fff; padding:12px 16px; border-radius:10px; font-weight:700;
    width:100%; cursor:pointer; display:inline-flex; align-items:center; justify-content:center;
  }
  .btn-continue:hover { filter: brightness(.95); transform: translateY(-2px); }

  .gift {
    margin-top:14px; background: rgba(255,255,255,0.02); padding:12px; border-radius:8px; color:#d6d6d6;
  }

  @media (max-width: 980px) {
    .modal-content-custom { grid-template-columns: 1fr; }
    .pm-methods { flex-direction:row; flex-wrap:wrap; gap:10px; padding:14px; }
    .pm-method { flex:1 1 30%; min-width: 90px; }
  }
</style>

<section class="modal-wrapper">
  <div class="modal-content-custom" role="dialog" aria-modal="true">
    <div class="pm-methods" aria-hidden="false">
      <!-- Примеры методов оплаты, заменяй src на реальные иконки -->
      <div class="pm-method active"><img src="/static/img/payments/method_1.png" alt="method1"></div>
      <div class="pm-method"><img src="/static/img/payments/method_4.png" alt="method2"></div>
      <div class="pm-method"><img src="/static/img/payments/method_5.png" alt="method3"></div>
      <div class="pm-method"><img src="/static/img/payments/method_6.png" alt="method4"></div>
      <div class="pm-method"><img src="/static/img/payments/method_7.png" alt="method5"></div>
      <div class="pm-method"><img src="/static/img/payments/method_8.png" alt="method6"></div>
    </div>

    <div class="pm-info">
      <h4>Покупка «{{ plan.title }}»</h4>

      <div class="price-line">
        К оплате:
        <s>{{ plan.old_price }}</s>
        <b style="color:#9fffa1; margin-left:8px; font-size:1.4rem;">{{ plan.price }} ₽</b>
      </div>

      {% if plan.discount %}
      <div class="badge-discount">Скидка {{ plan.discount }}</div>
      {% endif %}

      <form action="/payment/start" method="get" style="margin-top:12px;">
        <input type="hidden" name="plan" value="{{ plan.id }}">
        <button type="submit" class="btn-continue">
          <i class="fa-solid fa-circle-arrow-right mr-2"></i> Продолжить
        </button>
      </form>

      <div class="gift">
        <strong><i class="fa-solid fa-gift mr-2"></i> Подарок</strong>
        <p style="margin:6px 0 0;">После оплаты вы получите уникальный промокод на скидку <b>5%</b>.</p>
      </div>

      <div style="margin-top:auto; text-align:left;">
        <a href="/buy" style="color:#cfcfcf; text-decoration:none;">← Вернуться к тарифам</a>
      </div>
    </div>
  </div>
</section>
{% endblock %}
