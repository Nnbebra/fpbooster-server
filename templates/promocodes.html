{% extends "base.html" %}
{% block content %}
<h2 class="mb-4">Промокоды</h2>

<!-- Кнопка создания -->
<div class="d-flex justify-content-end mb-3">
  <a href="/admin/promocodes/new" class="btn btn-purple">
    <i class="fas fa-plus"></i> Создать промокод
  </a>
</div>

<!-- Таблица промокодов -->
<div class="card-dark">
  <table class="table table-dark table-striped table-hover rounded overflow-hidden mb-0">
    <thead>
      <tr>
        <th>Код</th>
        <th>Владелец</th>
        <th>Скидка (%)</th>
        <th>Бонусные дни</th>
        <th>Использований</th>
        <th>Последнее использование</th>
        <th>Действия</th>
      </tr>
    </thead>
    <tbody>
      {% for row in rows %}
      <tr>
        <td><span class="badge bg-gradient-purple">{{ row.code }}</span></td>
        <td>{{ row.owner or "—" }}</td>
        <td><span class="text-info fw-bold">{{ row.discount or 0 }}%</span></td>
        <td><span class="text-warning fw-bold">{{ row.bonus_days or 0 }}</span></td>
        <td>{{ row.uses or 0 }}</td>
        <td>{{ row.last_used.strftime("%Y-%m-%d %H:%M:%S") if row.last_used else "—" }}</td>
        <td>
          <a href="/admin/promocodes/edit/{{ row.code }}" class="btn btn-sm btn-purple">
            <i class="fas fa-edit"></i> Изменить
          </a>
          <a href="/admin/promocodes/delete/{{ row.code }}" class="btn btn-sm btn-danger"
             onclick="return confirm('Удалить промокод?')">
            <i class="fas fa-trash"></i> Удалить
          </a>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
