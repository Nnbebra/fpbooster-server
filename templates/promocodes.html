{% extends "base.html" %}
{% block content %}
<h2 class="mb-4">Промокоды</h2>

<div class="d-flex justify-content-between align-items-center mb-4">
  <a href="/admin/promocodes/new" class="btn btn-purple">
    <i class="fas fa-plus"></i> Создать промокод
  </a>
</div>

<div class="card-dark">
  <table class="table table-dark table-striped table-hover rounded overflow-hidden mb-0">
    <thead>
      <tr>
        <th scope="col">Код</th>
        <th scope="col">Владелец</th>
        <th scope="col">Скидка / Дни</th>
        <th scope="col">Использований</th>
        <th scope="col">Последнее использование</th>
        <th scope="col">Действия</th>
      </tr>
    </thead>
    <tbody>
      {% for row in rows %}
      <tr>
        <td><span class="badge bg-gradient-purple">{{ row.code }}</span></td>
        <td>{{ row.owner or "—" }}</td>
        <td>{{ row.discount }}</td>
        <td>{{ row.uses or 0 }}</td>
        <td>{{ row.last_used.strftime("%Y-%m-%d %H:%M:%S") if row.last_used else "—" }}</td>
        <td>
          <a href="/admin/promocodes/edit/{{ row.code }}" class="btn btn-sm btn-purple">
            <i class="fas fa-edit"></i> Изменить
          </a>
          <a href="/admin/promocodes/delete/{{ row.code }}" class="btn btn-sm btn-danger"
             onclick="return confirm('Удалить промокод?')">
            <i class="fas fa-trash"></i> Удалить
          </a>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
