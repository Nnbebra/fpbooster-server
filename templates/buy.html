{% extends "account_base.html" %}
{% block title %}Магазин FPBooster{% endblock %}

{% block content %}
<link rel="stylesheet" href="/templates_css/buy.css?v=7">

<main>
<section style="padding: 40px 0 80px; margin-top: 60px;">
  <div class="container">
    <h2 class="page-title reveal-card">Магазин FPBooster</h2>
    
    <div class="plans-grid">
      {% for plan in plans %}
      <div class="plan-card reveal-card {% if not plan.available %}unavailable{% endif %}">
        
        {% if plan.discount %}
          <span class="discount-badge">{{ plan.discount }}</span>
        {% endif %}
        
        <div class="img-wrap">
          <img src="{{ plan.img }}" alt="{{ plan.title }}" loading="lazy">
        </div>
        
        <h4>{{ plan.title }}</h4>
        
        <p>{{ plan.desc }}</p>

        <div class="price">
          {% if plan.old_price %}
            <s>{{ plan.old_price }} ₽</s> 
          {% endif %}
          <span class="current">{{ plan.price }} ₽</span>
        </div>
        
        {% if plan.available %}
            <a href="/checkout/{{ plan.id }}" class="btn-cta">
              <i class="fa-solid fa-cart-shopping"></i> Купить
            </a>
        {% else %}
            <div class="coming-soon-badge">
                <i class="fa-regular fa-clock"></i> Скоро в продаже
            </div>
        {% endif %}

      </div>
      {% endfor %}
    </div>
  </div>
</section>
</main>

<script defer src="/JavaScript/main.js?v=FIXED_LINKS_V12"></script>

<script>
document.addEventListener("DOMContentLoaded", function() {
    const observer = new IntersectionObserver((entries) => {
        entries.forEach((entry, index) => {
            if (entry.isIntersecting) {
                // Добавляем задержку для эффекта "лесенки"
                setTimeout(() => {
                    entry.target.classList.add('active');
                }, index * 100); 
                observer.unobserve(entry.target);
            }
        });
    }, { threshold: 0.1 });

    document.querySelectorAll('.reveal-card').forEach(el => {
        observer.observe(el);
    });
});
</script>
{% endblock %}


